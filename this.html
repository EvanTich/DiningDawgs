<!DOCTYPE HTML>
<html>
    <head>
        <link src="dining.css" type="text/css">
        <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

        <script type="text/javascript">


            window.onload = function () {

                var yourUrl="https://dining-capacity.firebaseio.com/data/ohouse.json";
                function Get(yourUrl){
                    var Httpreq = new XMLHttpRequest(); // a new request
                    Httpreq.open("GET",yourUrl,false);
                    Httpreq.send(null);
                    return Httpreq.responseText;          
                }
                var that="1550941534";

                var json_objOhouse = JSON.parse(Get(yourUrl));
                console.log("this is the author name: "+json_objOhouse[that]);

                var keySetOhouse = Object.keys(json_objOhouse);

                var mostRecentTimeOhouse = keySetOhouse.length-1;

                var yourUrl="https://dining-capacity.firebaseio.com/data/bolton.json";
                function Get(yourUrl){
                    var Httpreq = new XMLHttpRequest(); // a new request
                    Httpreq.open("GET",yourUrl,false);
                    Httpreq.send(null);
                    return Httpreq.responseText;          
                }
                var that="1550941534";

                var json_objBolton = JSON.parse(Get(yourUrl));
                console.log("this is the author name: "+json_objBolton[that]);

                var keySetBolton = Object.keys(json_objBolton);

                var mostRecentTimeBolton = keySetBolton.length-1;

                console.log(mostRecentTimeOhouse);
                var chart = new CanvasJS.Chart("chartContainer", {
                    title:{
                        text: "Current Capacity"              
                    },
                    axisY:{
                        title: "Capacity(%)"
                    },
                    data: [              
                        {
                            // Change type to "doughnut", "line", "splineArea", etc.
                            type: "stackedColumn100",
                            dataPoints: [
                                { label: "Bolton",  y: 64  },
                                { label: "O-House", y: 43  },
                                { label: "Snelling", y: 51  },
                                { label: "Joe Frank",  y: 25  },
                                { label: "The Niche",  y: 73  }
                            ]

                        },
                        {
                            // Change type to "doughnut", "line", "splineArea", etc.
                            type: "stackedColumn100",
                            dataPoints: [
                                { label: "Bolton",  y: 46  },
                                { label: "O-House", y: 67  },
                                { label: "Snelling", y: 49  },
                                { label: "Joe Frank",  y: 75  },
                                { label: "The Niche",  y: 27  }
                            ]

                        }
                    ]
                });
                
                chart.render();
                var lineChart = new CanvasJS.Chart("lineChartContainer", {
                    title:{
                        text: "Past Traffic"              
                    },
                    axisY:{
                        title: "Capacity(%)"
                    },
                    data: [              
                        {
                            // Change type to "doughnut", "line", "splineArea", etc.
                            type: "line",
                            dataPoints: [
                                { x: new Date(1551080330000), y: 0 },
                                { x: new Date(1551097458000), y: 4 },
                                { x: new Date(1551103167000), y: 35 },
                                { x: new Date(1551113084000),  y: 87 },
                                { x: new Date(1551125409000),  y: 43  }, 
                                { x: new Date(1551137729000),  y: 31 },
                                { x: new Date(1551161469000),  y: 0  }
                            ]

                        }
                    ]
                });
                lineChart.render();


            }
            function boo(value){
                    console.log(value);
                }
        </script>
    </head>
    <body>
        <div class="container">

            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#home">Current Capacity</a></li>
                <li><a data-toggle="tab" href="#menu1">Dining Traffic History</a></li>

            </ul>

            <div class="tab-content">
                <div id="home" class="tab-pane fade in active">
                    <div id="chartContainer"></div>    
                </div>
                <div id="menu1" class="tab-pane fade">
                    <div id="lineChartContainer">

                    </div>
                    <div style="position: absolute; bottom:350pt;">
                        <select id="selector" onchange="boo(this.value);">
                            <option value="">Select One</option>
                            <option value="Sunday" >Sunday</option>
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                            <option value="Sunday">Sunday</option>
                        </select>
                    </div>

                </div>

            </div>

        </div>
    </body>
</html>